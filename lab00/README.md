# Описание базы данных для нашего веб-сайта
База данных разработана для хранения информации о пользователях, их ролях, расписании, домашних заданиях, оплате и взаимодействии учеников и преподавателей. Структура БД построена на основе реляционной модели и включает в себя несколько ключевых таблиц, связанных между собой для эффективного хранения и обработки данных.

## <ins>Основные таблицы и их назначение</ins>
### Таблица user (Пользователь)
#### Хранит основные данные о пользователях системы:
- id (уникальный идентификатор пользователя)
- name, fname (имя и фамилия)
- birthdate (дата рождения)
- email (логин)
- contact (контактные данные)
- telegram_nick (ник в Telegram)
- password_hash (хэш пароля для безопасного хранения)
#### Связи:
Связана с таблицей user_type, определяющей, является ли пользователь учеником или преподавателем.
Используется в таблицах points, timetable, homework, paying и др.

### Таблица user_type (Тип пользователя)
#### Содержит информацию о типах пользователей:
- id (идентификатор типа)
- type_name (название роли (например, "ученик", "преподаватель"))
#### Связи:
Связана с user через id, определяя роль каждого пользователя.

### Таблица points (Баллы учеников)
#### Хранит информацию о накопленных баллах:
- student_id (идентификатор ученика (внешний ключ на user))
- points_student (количество полученных баллов)

### Таблица homework (Домашние задания)
#### Содержит задания, связанные с конкретными уроками:
- id (идентификатор записи)
- number_lesson (номер урока)
- topic_lesson (тема занятия)
- homework (текст домашнего задания)
- material_hw, finish_hw (файлы с материалами к заданию и выполненные работы)

### Таблица students_homework (Связь учеников с домашними заданиями)
- student_id (идентификатор ученика)
- homework_id (идентификатор домашнего задания)
- score (оценка за выполненное задание)
#### Связи:
Позволяет связывать учеников с их выполненными работами.

### Таблица timetable (Расписание занятий)
#### Определяет расписание ученика:
- student_id (идентификатор ученика)
- month_id (месяц)
- name_month (название месяца)

### Таблица timetable_day (Дни занятий)
#### Хранит информацию о днях занятий:
- student_id, month_id, day (связывают день с учеником и месяцем)

### Таблица paying (Оплата занятий)
#### Фиксирует платежи за занятия:
- id (идентификатор платежа)
- student_id (идентификатор ученика)
- money (сумма платежа)
- number_lesson (количество оплаченных занятий)
- data_start, data_finish (период действия оплаты)
- status (статус платежа (оплачен/не оплачен))

### Таблица additional_materials (Дополнительные материалы)
#### Содержит дополнительные учебные материалы:
- student_id (идентификатор ученика)
- add_materials (файлы материалов)

## <ins>Связи между таблицами</ins>
- Один пользователь – одна роль (user_type).
- Один ученик – много домашних заданий (students_homework).
- Один ученик – расписание на месяц (timetable, timetable_day).
- Один ученик – несколько платежей (paying).
- Один ученик – накопление баллов (points).
- Один ученик - много преподавателей (student_tutor).
- Один преподаватель - много учеников (student_tutor).

## <ins> Использование и работа с данными</ins>
### Регистрация и аутентификация пользователей
При регистрации создается запись в таблице user, пароли хешируются. Роль пользователя указывается в user_type.

### Добавление и выполнение домашних заданий
Учителя загружают задания в homework, ученики прикрепляют выполненные работы, которые связываются с students_homework.

### Оплата занятий
Фиксируется в paying, отслеживается статус платежей для отправления напоминательных уведемлений, в случае просрочки оплаты.

### Расписание занятий
Хранится в timetable, отдельные дни занятий в timetable_day.

### Заключение
Эта база данных обеспечивает гибкую и масштабируемую систему управления пользователями, расписанием, оплатами и взаимодействием учеников с преподавателями. Структура реляционной БД позволяет эффективно работать с данными, обеспечивая контроль доступа и корректное распределение информации.

![image](https://github.com/user-attachments/assets/56610d5e-a9ff-4a89-aca9-27f501db975f)


#### <ins>Описание структуры API для нашего веб-сайта<ins>

API (Application Programming Interface) — набор правил и протоколов для взаимодействия программных компонентов.


• Позволяет разделить логику фронтенда и бэкенда: фронтенд отвечает за отображение данных и взаимодействие с пользователем, а бэкенд — за обработку данных и бизнес-логику.

• Фронтенд отправляет запросы к API для получения данных (например, список домашних заданий) или выполнения действий (например, регистрация пользователя).

• Бэкенд обрабатывает эти запросы, взаимодействует с базой данных и возвращает результаты фронтенду.

• API выступает посредником между фронтендом и базой данных: при входе ученика в профиль фронтенд отправляет запрос к API, который извлекает данные из базы и возвращает их.
![image](https://github.com/user-attachments/assets/81ee083a-81cd-400d-8150-cddc39983af7)

* * *

### **Определить структуру API (REST, методы, URL, параметры, форматы запросов и ответов).**

0.  RESTful подход, так как он простой, понятный и широко применяется в веб-разработке.

1.  **Базовый URL**:  
    `https://api.tutorhub.com/v1/`

- Использование поддомена api отделяет API от основного сайта, что упрощает маршрутизацию и масштабирование.
- Версия API (v1) позволяет в будущем вносить изменения, не ломая существующие клиенты.
- HTTPS обеспечивает безопасность передачи данных.

2.  **Форматы запросов и ответов**:

- JSON - стандартный формат для REST API. Легковесный, легко читается и поддерживается всеми ЯП; легко преобразовывается в объекты на стороне клиента

- **Коды статусов HTTP** - помогают клиенту понять результат запроса без необходимости анализировать тело ответа:

  `200 OK` — успешный запрос.

  `201 Created` — ресурс успешно создан.

  `400 Bad Request` — неверные данные в запросе.

  `401 Unauthorized` — требуется авторизация.

  `404 Not Found` — ресурс не найден.

  `500 Internal Server Error` — ошибка на сервере.

3.
**Задачи API:**

* Авторизация и регистрация:
    - Регистрация пользователя:
    - Авторизация пользователя:
* Управление пользователями:

    - Получение данных профиля (ученика или преподавателя).
    - Обновление данных профиля (например, изменение имени или email).

* Работа с домашними заданиями:

    - Получение списка заданий для ученика.

    - Загрузка выполненного задания.

    - Оценка задания преподавателем.
    - Добавление задания преподавателем.


* Управление баллами:

    - Получение текущих баллов ученика.

    - Обновление баллов (например, за выполненное задание).

* Работа с расписанием:

    - Получение расписания занятий.
    - Добавление новых занятий (для преподавателя).

* Дополнительные материалы:

    - Получение списка материалов (ссылок или файлов).

    - Загрузка новых материалов (для преподавателя).

* Оплата и правила:

    - Получение информации о статусе оплаты.

    - Отправка напоминаний об оплате (для преподавателя).

https://editor-next.swagger.io/ 

* * *

